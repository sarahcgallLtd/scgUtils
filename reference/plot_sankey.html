<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='plot_sankey enhances
networkD3::sankeyNetwork
and htmlwidgets to create a Sankey diagram, a specific type of flow diagram
that visually represents the movement or flow of data between different entities (referred to as "nodes").
It is particularly useful for illustrating the distribution of votes flowing between parties across elections
or in preferential voting systems.'><title>Sankey Diagram Visualisation — plot_sankey • scgUtils</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Sankey Diagram Visualisation — plot_sankey"><meta property="og:description" content='plot_sankey enhances
networkD3::sankeyNetwork
and htmlwidgets to create a Sankey diagram, a specific type of flow diagram
that visually represents the movement or flow of data between different entities (referred to as "nodes").
It is particularly useful for illustrating the distribution of votes flowing between parties across elections
or in preferential voting systems.'><meta property="og:image" content="https://sarahcgall.github.io/scgUtils/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">scgUtils</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/using-survey-data.html">Using Survey Data</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/sarahcgall/scgUtils/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Sankey Diagram Visualisation</h1>
      <small class="dont-index">Source: <a href="https://github.com/sarahcgall/scgUtils/blob/HEAD/R/plot_sankey.R" class="external-link"><code>R/plot_sankey.R</code></a></small>
      <div class="d-none name"><code>plot_sankey.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>plot_sankey</code> enhances
<a href="https://www.rdocumentation.org/packages/networkD3/versions/0.4/topics/sankeyNetwork" class="external-link"><code><a href="https://rdrr.io/pkg/networkD3/man/sankeyNetwork.html" class="external-link">networkD3::sankeyNetwork</a></code></a>
and <a href="https://www.htmlwidgets.org/" class="external-link"><code>htmlwidgets</code></a> to create a Sankey diagram, a specific type of flow diagram
that visually represents the movement or flow of data between different entities (referred to as "nodes").
It is particularly useful for illustrating the distribution of votes flowing between parties across elections
or in preferential voting systems.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">plot_sankey</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">source</span>,</span>
<span>  <span class="va">target</span>,</span>
<span>  <span class="va">value</span>,</span>
<span>  units <span class="op">=</span> <span class="st">""</span>,</span>
<span>  colours <span class="op">=</span> <span class="fu"><a href="colour_pal.html">colour_pal</a></span><span class="op">(</span><span class="st">"catExtended"</span><span class="op">)</span>,</span>
<span>  fontSize <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  fontFamily <span class="op">=</span> <span class="st">"Calibri"</span>,</span>
<span>  nodeWidth <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  nodePadding <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  margin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>left <span class="op">=</span> <span class="fl">0</span>, right <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">1200</span>,</span>
<span>  height <span class="op">=</span> <span class="fl">800</span>,</span>
<span>  shiftLabel <span class="op">=</span> <span class="cn">NA</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>A data frame containing the flow data, where each row represents a unique flow from a source to a target.</p></dd>


<dt>source</dt>
<dd><p>The column in the data frame representing the source node of the flow.</p></dd>


<dt>target</dt>
<dd><p>The column in the data frame representing the target node of the flow.</p></dd>


<dt>value</dt>
<dd><p>The column in the data frame representing the magnitude or volume of the flow between the source and target.</p></dd>


<dt>units</dt>
<dd><p>A string indicating the units of the 'value'. This is displayed in the tooltip of the diagram.
The default is an empty string, indicating that no units are specified.</p></dd>


<dt>colours</dt>
<dd><p>A list or vector of colours (in hexadecimal format or colour names) to be used for the nodes and links
in the diagram. If a named list is provided, the names should correspond to the node names for specific
colour mapping.</p></dd>


<dt>fontSize</dt>
<dd><p>The font size for text in the diagram. Default is set to 20.</p></dd>


<dt>fontFamily</dt>
<dd><p>The font family for text in the diagram. Default is "Calibri".</p></dd>


<dt>nodeWidth</dt>
<dd><p>The width of the nodes (entities) in the diagram. Default is 20.</p></dd>


<dt>nodePadding</dt>
<dd><p>The padding between nodes in the diagram. Default is 10.</p></dd>


<dt>margin</dt>
<dd><p>A list specifying the margins around the diagram. Default is <code>list("left" = 0, "right" = 0)</code>.
Increase the margin if the node names are long and go off the page.</p></dd>


<dt>width</dt>
<dd><p>The width of the plot in pixels. Default is 1200.</p></dd>


<dt>height</dt>
<dd><p>The height of the plot in pixels. Default is 800.</p></dd>


<dt>shiftLabel</dt>
<dd><p>A numeric value controlling the positioning of labels on the nodes. When set to <code>NA</code>,
labels are automatically placed outside the nodes. If the automatic placement results in uneven label
distribution, this parameter can be adjusted to achieve the desired layout.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A Sankey diagram visualising the flow of data as specified by the parameters. The diagram is interactive,
allowing for the exploration of individual flows and nodes.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># Prepare data</span></span></span>
<span class="r-in"><span><span class="va">split</span> <span class="op">&lt;-</span> <span class="fu"><a href="grp_freq.html">grp_freq</a></span><span class="op">(</span><span class="va">df</span>,</span></span>
<span class="r-in"><span>                  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Q1a"</span>,<span class="st">"Q1c"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  <span class="st">"wgtvar"</span>,</span></span>
<span class="r-in"><span>                  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Party_Vote"</span>,<span class="st">"Candidate_Vote"</span>,<span class="st">"Votes"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span></span>
<span class="r-in"><span>         <span class="fu">mutate</span><span class="op">(</span>Votes <span class="op">=</span> <span class="va">Votes</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">Votes</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#           Party_Vote    Candidate_Vote        Votes</span></span></span>
<span class="r-in"><span><span class="co"># 1       Labour Party      Labour Party 0.1036125880</span></span></span>
<span class="r-in"><span><span class="co"># 2     National Party      Labour Party 0.1040036893</span></span></span>
<span class="r-in"><span><span class="co"># 3        Green Party      Labour Party 0.0320547032</span></span></span>
<span class="r-in"><span><span class="co"># ...</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create sankey</span></span></span>
<span class="r-in"><span><span class="fu">plot_sankey</span><span class="op">(</span>data <span class="op">=</span> <span class="va">split</span>,</span></span>
<span class="r-in"><span>            source <span class="op">=</span> <span class="st">"Party_Vote"</span>,</span></span>
<span class="r-in"><span>            target <span class="op">=</span> <span class="st">"Candidate_Vote"</span>,</span></span>
<span class="r-in"><span>            value <span class="op">=</span> <span class="st">"Votes"</span>,</span></span>
<span class="r-in"><span>            colours <span class="op">=</span> <span class="fu"><a href="colour_prep.html">colour_prep</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Q1a"</span>, <span class="st">"Q1c"</span><span class="op">)</span>, pal_name <span class="op">=</span> <span class="st">"polNZ"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Sarah Gall.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

