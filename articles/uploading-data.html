<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="scgUtils">
<title>Uploading &amp; Cleaning Data • scgUtils</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.8/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.8/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Uploading &amp; Cleaning Data">
<meta property="og:description" content="scgUtils">
<meta property="og:image" content="https://sarahcgall.github.io/scgUtils/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-none"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">scgUtils</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/using-survey-data.html">Using scgUtils with Survey Data</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Function Explainers</h6>
    <a class="dropdown-item" href="../articles/uploading-data.html">Uploading &amp; Cleaning Data</a>
    <a class="dropdown-item" href="../articles/creating-colour-palettes.html">Mastering Colour Selection</a>
    <a class="dropdown-item" href="../articles/visualising-data.html">Visualising Data</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/sarahcgall/scgUtils/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Uploading &amp; Cleaning Data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/sarahcgall/scgUtils/blob/HEAD/vignettes/articles/uploading-data.rmd" class="external-link"><code>vignettes/articles/uploading-data.rmd</code></a></small>
      <div class="d-none name"><code>uploading-data.rmd</code></div>
    </div>

    
    
<style>
  .content p {
    margin-top: 30px !important;
  }

  details {
    margin-bottom: 40px;
  }
</style>
<p><br> Data preparation is a crucial step in any data analysis
workflow. In this guide, we explore the <code>scgUtils</code> R package,
specifically focusing on three functions: <code><a href="../reference/get_data.html">get_data()</a></code>,
<code><a href="../reference/process_factors.html">process_factors()</a></code>, and <code><a href="../reference/get_file.html">get_file()</a></code>. These
functions streamline the process of loading, cleaning, and preprocessing
data, thereby simplifying your workflow:</p>
<ul>
<li>
<a href="https://sarahcgall.github.io/scgUtils/reference/get_data.html"><code>get_data()</code></a>:
A helper function to load datasets into your R environment, allowing you
to name the data frame.</li>
<li>
<a href="https://sarahcgall.github.io/scgUtils/reference/process_factors.html"><code>process_factors()</code></a>:
Cleans your data frames by removing unused factor levels, while keeping
non-factor columns intact.</li>
<li>
<a href="https://sarahcgall.github.io/scgUtils/reference/get_file.html"><code>get_file()</code></a>:
Retrieves and processes files from various sources, including local
storage, OneDrive, and the web, and performs initial preprocessing based
on file type.</li>
</ul>
<p><br></p>
<div class="section level3">
<h3 id="uploading-package-data-with-get_data">Uploading Package Data with <code>get_data()</code><a class="anchor" aria-label="anchor" href="#uploading-package-data-with-get_data"></a>
</h3>
<p>The <code><a href="../reference/get_data.html">get_data()</a></code> function in <code>scgUtils</code> is
designed to simplify the process of importing datasets into your R
environment. This function is particularly useful when working with
packaged data or when you want to load data seamlessly without worrying
about file paths or data import syntax. <br><br></p>
<p><strong><em>Example Usage:</em></strong><br> Suppose you have a
dataset named “survey” within your package or want to access a dataset
from another package. The <code><a href="../reference/get_data.html">get_data()</a></code> function makes this
process straightforward:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Loading a sample dataset</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data.html">get_data</a></span><span class="op">(</span><span class="st">"survey"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Inspecting the dataset's class and a categorical column</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "tbl_df"     "tbl"        "data.frame"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">turnoutUKGeneral</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "haven_labelled" "vctrs_vctr"     "double"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="4%">
<col width="13%">
<col width="22%">
<col width="27%">
<col width="21%">
<col width="10%">
</colgroup>
<thead><tr class="header">
<th align="right">id</th>
<th align="right">wt</th>
<th align="right">turnoutUKGeneral</th>
<th align="right">generalElectionVote</th>
<th align="right">partyIdStrength</th>
<th align="right">partyId</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">7</td>
<td align="right">0.3755288</td>
<td align="right">5</td>
<td align="right">4</td>
<td align="right">2</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="right">14</td>
<td align="right">0.5528756</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">15</td>
<td align="right">0.7122303</td>
<td align="right">5</td>
<td align="right">12</td>
<td align="right">2</td>
<td align="right">12</td>
</tr>
<tr class="even">
<td align="right">18</td>
<td align="right">0.4396403</td>
<td align="right">4</td>
<td align="right">4</td>
<td align="right">3</td>
<td align="right">10</td>
</tr>
<tr class="odd">
<td align="right">19</td>
<td align="right">0.3613798</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="right">24</td>
<td align="right">1.6864884</td>
<td align="right">5</td>
<td align="right">7</td>
<td align="right">NA</td>
<td align="right">10</td>
</tr>
</tbody>
</table>
<p>The function loads the dataset and assigns it to a variable, in this
case, df. It then allows you to perform initial inspections and
manipulations. This functionality is essential for quickly setting up
your data for analysis, especially in exploratory data analysis or
educational settings. <br><br></p>
<p><em>Additionally, notice how the dataset initially has a
‘haven_labelled’ class. To convert it to a more standard format, we use
the <a href="https://larmarange.github.io/labelled/" class="external-link"><code>labelled</code></a>
package:</em></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Converting 'haven_labelled' data to standard format</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">labelled</span><span class="fu">::</span><span class="fu"><a href="https://larmarange.github.io/labelled/reference/to_factor.html" class="external-link">unlabelled</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View class</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "tbl_df"     "tbl"        "data.frame"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">turnoutUKGeneral</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "factor"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="2%">
<col width="8%">
<col width="25%">
<col width="25%">
<col width="13%">
<col width="25%">
</colgroup>
<thead><tr class="header">
<th align="right">id</th>
<th align="right">wt</th>
<th align="left">turnoutUKGeneral</th>
<th align="left">generalElectionVote</th>
<th align="left">partyIdStrength</th>
<th align="left">partyId</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">7</td>
<td align="right">0.3755288</td>
<td align="left">Very likely that I would vote</td>
<td align="left">Scottish National Party (SNP)</td>
<td align="left">Fairly strong</td>
<td align="left">Scottish National Party (SNP)</td>
</tr>
<tr class="even">
<td align="right">14</td>
<td align="right">0.5528756</td>
<td align="left">Very likely that I would vote</td>
<td align="left">Conservative</td>
<td align="left">Not very strong</td>
<td align="left">Labour</td>
</tr>
<tr class="odd">
<td align="right">15</td>
<td align="right">0.7122303</td>
<td align="left">Very likely that I would vote</td>
<td align="left">Brexit Party/Reform UK</td>
<td align="left">Fairly strong</td>
<td align="left">Brexit Party/Reform UK</td>
</tr>
<tr class="even">
<td align="right">18</td>
<td align="right">0.4396403</td>
<td align="left">Fairly likely</td>
<td align="left">Scottish National Party (SNP)</td>
<td align="left">Not very strong</td>
<td align="left">No - none</td>
</tr>
<tr class="odd">
<td align="right">19</td>
<td align="right">0.3613798</td>
<td align="left">Very likely that I would vote</td>
<td align="left">Labour</td>
<td align="left">Very strong</td>
<td align="left">Labour</td>
</tr>
<tr class="even">
<td align="right">24</td>
<td align="right">1.6864884</td>
<td align="left">Very likely that I would vote</td>
<td align="left">Green Party</td>
<td align="left">NA</td>
<td align="left">No - none</td>
</tr>
</tbody>
</table>
<p><br></p>
<hr>
</div>
<div class="section level3">
<h3 id="cleaning-data-with-process_factors">Cleaning Data with <code>process_factors()</code><a class="anchor" aria-label="anchor" href="#cleaning-data-with-process_factors"></a>
</h3>
<p>The <code><a href="../reference/process_factors.html">process_factors()</a></code> function is a crucial tool for
data cleaning, particularly in dealing with factor variables. Often in
datasets, especially those derived from surveys or categorisations,
factor variables contain levels that are not used (e.g., caused by a
factor level that was used to disqualify respondents).</p>
<p>These unused levels can be misleading and may affect analyses if not
handled properly. The <code><a href="../reference/process_factors.html">process_factors()</a></code> function simplifies
this task by automatically identifying and removing unused factor
levels, streamlining your dataset for analysis. <br><br></p>
<p><strong><em>Example Usage:</em></strong><br> Consider a dataset with
a factor variable <code>ageGroup</code> that includes levels like “Under
18”, “18-25”, “26-35”, etc. If your dataset does not have any entries
for “Under 18”, this level is redundant.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Examining factor levels before cleaning</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">ageGroup</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Under 18" "18-25"    "26-35"    "36-45"    "46-55"    "56-65"   </span></span>
<span><span class="co">#&gt; [7] "66+"</span></span></code></pre></div>
<p>By applying <code><a href="../reference/process_factors.html">process_factors()</a></code>, we can clean up these
unused levels:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Cleaning the dataset with process_factors</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/process_factors.html">process_factors</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Verifying that "Under 18" is removed</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">ageGroup</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "18-25" "26-35" "36-45" "46-55" "56-65" "66+"</span></span>
<span></span>
<span><span class="co"># Checking the metadata of the 'ageGroup' column</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">ageGroup</span>, <span class="st">"label"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Age group"</span></span>
<span></span>
<span><span class="co"># Inspecting the class of cleaned columns</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "data.frame"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">turnoutUKGeneral</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "factor"</span></span></code></pre></div>
<p><br></p>
<hr>
</div>
<div class="section level3">
<h3 id="using-get_file-for-diverse-data-sources">Using <code>get_file()</code> for Diverse Data Sources<a class="anchor" aria-label="anchor" href="#using-get_file-for-diverse-data-sources"></a>
</h3>
<p>The <code><a href="../reference/get_file.html">get_file()</a></code> function is a versatile tool for
importing data into R from various sources. This function is
particularly useful when working with data stored in different locations
or formats. It not only retrieves the data but also performs initial
preprocessing based on the file type, such as handling special
characters in CSV files or dealing with complexities in .sav (SPSS)
files. <br><br></p>
<div class="section level4">
<h4 id="local">
<strong>Local</strong><a class="anchor" aria-label="anchor" href="#local"></a>
</h4>
<p>For files stored locally, <code><a href="../reference/get_file.html">get_file()</a></code> can directly access
them given the correct path. This is useful for datasets stored within
your project or elsewhere on your system.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_file.html">get_file</a></span><span class="op">(</span>file_path <span class="op">=</span> <span class="st">"inst/extdata/survey.sav"</span>,</span>
<span>               source <span class="op">=</span> <span class="st">"local"</span><span class="op">)</span> <span class="co"># default</span></span>
<span></span>
<span><span class="co"># View class</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "data.frame"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">turnoutUKGeneral</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "factor"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="2%">
<col width="8%">
<col width="25%">
<col width="25%">
<col width="13%">
<col width="25%">
</colgroup>
<thead><tr class="header">
<th align="right">id</th>
<th align="right">wt</th>
<th align="left">turnoutUKGeneral</th>
<th align="left">generalElectionVote</th>
<th align="left">partyIdStrength</th>
<th align="left">partyId</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">7</td>
<td align="right">0.3755288</td>
<td align="left">Very likely that I would vote</td>
<td align="left">Scottish National Party (SNP)</td>
<td align="left">Fairly strong</td>
<td align="left">Scottish National Party (SNP)</td>
</tr>
<tr class="even">
<td align="right">14</td>
<td align="right">0.5528756</td>
<td align="left">Very likely that I would vote</td>
<td align="left">Conservative</td>
<td align="left">Not very strong</td>
<td align="left">Labour</td>
</tr>
<tr class="odd">
<td align="right">15</td>
<td align="right">0.7122303</td>
<td align="left">Very likely that I would vote</td>
<td align="left">Brexit Party/Reform UK</td>
<td align="left">Fairly strong</td>
<td align="left">Brexit Party/Reform UK</td>
</tr>
<tr class="even">
<td align="right">18</td>
<td align="right">0.4396403</td>
<td align="left">Fairly likely</td>
<td align="left">Scottish National Party (SNP)</td>
<td align="left">Not very strong</td>
<td align="left">No - none</td>
</tr>
<tr class="odd">
<td align="right">19</td>
<td align="right">0.3613798</td>
<td align="left">Very likely that I would vote</td>
<td align="left">Labour</td>
<td align="left">Very strong</td>
<td align="left">Labour</td>
</tr>
<tr class="even">
<td align="right">24</td>
<td align="right">1.6864884</td>
<td align="left">Very likely that I would vote</td>
<td align="left">Green Party</td>
<td align="left">NA</td>
<td align="left">No - none</td>
</tr>
</tbody>
</table>
<p><br></p>
</div>
<div class="section level4">
<h4 id="onedrive">
<strong>OneDrive</strong><a class="anchor" aria-label="anchor" href="#onedrive"></a>
</h4>
<p><code><a href="../reference/get_file.html">get_file()</a></code> can also interface with OneDrive, allowing
for seamless integration of data stored in the cloud. This feature is
particularly useful for collaborative projects or when accessing data
across multiple devices.</p>
<p><em>OneDrive Authentication:</em></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_file.html">get_file</a></span><span class="op">(</span>file_path <span class="op">=</span> <span class="st">"scgUtils_examples_folder/survey.sav"</span>,</span>
<span>               source <span class="op">=</span> <span class="st">"onedrive"</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="img/Microsoft-Office-365-Login-Screen.png" alt=""><p class="caption">Microsoft Office 365 Login Screen</p>
</div>
<p><br></p>
<p><em>After authentication, the file is downloaded and made available
in your R environment.</em></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#&gt; Loading Microsoft Graph login for default tenant</span></span>
<span></span>
<span><span class="co"># View class</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "data.frame"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">turnoutUKGeneral</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "factor"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="2%">
<col width="8%">
<col width="25%">
<col width="25%">
<col width="13%">
<col width="25%">
</colgroup>
<thead><tr class="header">
<th align="right">id</th>
<th align="right">wt</th>
<th align="left">turnoutUKGeneral</th>
<th align="left">generalElectionVote</th>
<th align="left">partyIdStrength</th>
<th align="left">partyId</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">7</td>
<td align="right">0.3755288</td>
<td align="left">Very likely that I would vote</td>
<td align="left">Scottish National Party (SNP)</td>
<td align="left">Fairly strong</td>
<td align="left">Scottish National Party (SNP)</td>
</tr>
<tr class="even">
<td align="right">14</td>
<td align="right">0.5528756</td>
<td align="left">Very likely that I would vote</td>
<td align="left">Conservative</td>
<td align="left">Not very strong</td>
<td align="left">Labour</td>
</tr>
<tr class="odd">
<td align="right">15</td>
<td align="right">0.7122303</td>
<td align="left">Very likely that I would vote</td>
<td align="left">Brexit Party/Reform UK</td>
<td align="left">Fairly strong</td>
<td align="left">Brexit Party/Reform UK</td>
</tr>
<tr class="even">
<td align="right">18</td>
<td align="right">0.4396403</td>
<td align="left">Fairly likely</td>
<td align="left">Scottish National Party (SNP)</td>
<td align="left">Not very strong</td>
<td align="left">No - none</td>
</tr>
<tr class="odd">
<td align="right">19</td>
<td align="right">0.3613798</td>
<td align="left">Very likely that I would vote</td>
<td align="left">Labour</td>
<td align="left">Very strong</td>
<td align="left">Labour</td>
</tr>
<tr class="even">
<td align="right">24</td>
<td align="right">1.6864884</td>
<td align="left">Very likely that I would vote</td>
<td align="left">Green Party</td>
<td align="left">NA</td>
<td align="left">No - none</td>
</tr>
</tbody>
</table>
<p><br></p>
</div>
<div class="section level4">
<h4 id="websites">
<strong>Websites</strong><a class="anchor" aria-label="anchor" href="#websites"></a>
</h4>
<p>Retrieving files from web sources is another key feature. This allows
you to directly import datasets hosted online without the need to
download them manually.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_file.html">get_file</a></span><span class="op">(</span>file_path <span class="op">=</span> <span class="st">"https://github.com/sarahcgall/scgUtils/blob/master/inst/extdata/survey.csv"</span>,</span>
<span>               source <span class="op">=</span> <span class="st">"web"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View class</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "tbl_df"     "tbl"        "data.frame"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">turnoutUKGeneral</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "character"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="2%">
<col width="8%">
<col width="25%">
<col width="25%">
<col width="13%">
<col width="25%">
</colgroup>
<thead><tr class="header">
<th align="right">id</th>
<th align="right">wt</th>
<th align="left">turnoutUKGeneral</th>
<th align="left">generalElectionVote</th>
<th align="left">partyIdStrength</th>
<th align="left">partyId</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">7</td>
<td align="right">0.3755288</td>
<td align="left">Very likely that I would vote</td>
<td align="left">Scottish National Party (SNP)</td>
<td align="left">Fairly strong</td>
<td align="left">Scottish National Party (SNP)</td>
</tr>
<tr class="even">
<td align="right">14</td>
<td align="right">0.5528756</td>
<td align="left">Very likely that I would vote</td>
<td align="left">Conservative</td>
<td align="left">Not very strong</td>
<td align="left">Labour</td>
</tr>
<tr class="odd">
<td align="right">15</td>
<td align="right">0.7122303</td>
<td align="left">Very likely that I would vote</td>
<td align="left">Brexit Party/Reform UK</td>
<td align="left">Fairly strong</td>
<td align="left">Brexit Party/Reform UK</td>
</tr>
<tr class="even">
<td align="right">18</td>
<td align="right">0.4396403</td>
<td align="left">Fairly likely</td>
<td align="left">Scottish National Party (SNP)</td>
<td align="left">Not very strong</td>
<td align="left">No - none</td>
</tr>
<tr class="odd">
<td align="right">19</td>
<td align="right">0.3613798</td>
<td align="left">Very likely that I would vote</td>
<td align="left">Labour</td>
<td align="left">Very strong</td>
<td align="left">Labour</td>
</tr>
<tr class="even">
<td align="right">24</td>
<td align="right">1.6864884</td>
<td align="left">Very likely that I would vote</td>
<td align="left">Green Party</td>
<td align="left">NA</td>
<td align="left">No - none</td>
</tr>
</tbody>
</table>
<p><br></p>
<hr>
</div>
</div>
<div class="section level3">
<h3 id="troubleshooting--sav-files-with-get_file">Troubleshooting .sav Files with <code>get_file()</code><a class="anchor" aria-label="anchor" href="#troubleshooting--sav-files-with-get_file"></a>
</h3>
<p>Working with .sav files (SPSS format) can sometimes lead to
challenges due to their complex structure and encoding. The
<code><a href="../reference/get_file.html">get_file()</a></code> function in the <code>scgUtils</code> package,
which utilises the <a href="https://haven.tidyverse.org/" class="external-link"><code>haven</code></a> package for
handling .sav files, is well-equipped to manage these challenges.
However, users may occasionally encounter issues related to encoding or
formatting. <br><br></p>
<div class="section level4">
<h4 id="common-issues-and-solutions">
<strong>Common Issues and Solutions:</strong><a class="anchor" aria-label="anchor" href="#common-issues-and-solutions"></a>
</h4>
<ol style="list-style-type: decimal">
<li><strong>Encoding Errors:</strong></li>
</ol>
<ul>
<li><ul>
<li>
<strong>Problem:</strong> .sav files may contain characters or
symbols not correctly encoded, leading to warnings or errors during the
import process.</li>
</ul></li>
<li><ul>
<li>
<strong>Solution:</strong> The <code><a href="../reference/get_file.html">get_file()</a></code> function
tries to manage these by attempting to read the file with different
encodings. If the default reading fails, it attempts with ‘latin1’
encoding. This approach handles a wide range of encoding issues that are
commonly encountered in .sav files.</li>
</ul></li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li><strong>Handling NA Values:</strong></li>
</ol>
<ul>
<li><ul>
<li>
<strong>Problem:</strong> SPSS files often have unique
representations for missing values, which may not align with R’s
standard NA.</li>
</ul></li>
<li><ul>
<li>
<strong>Solution:</strong> The <code><a href="../reference/get_file.html">get_file()</a></code> function
includes steps to handle these discrepancies. For instance, if a .sav
file represents missing values as “NA”, the following code snippet can
be used to convert them to R’s NA:</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Handling NA values represented as "__NA__" in .sav files</span></span>
<span><span class="va">df</span><span class="op">[</span><span class="va">df</span> <span class="op">==</span> <span class="st">"__NA__"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span></code></pre></div>
<p><br></p>
<p>This step ensures that R recognises missing values correctly,
allowing for accurate data analysis and manipulation. <br><br></p>
</div>
<div class="section level4">
<h4 id="best-practices-for-troubleshooting">
<strong>Best Practices for Troubleshooting:</strong><a class="anchor" aria-label="anchor" href="#best-practices-for-troubleshooting"></a>
</h4>
<ul>
<li>
<strong>Check File Formatting:</strong> Before attempting to import
a .sav file, ensure it is correctly formatted. Pay special attention to
any proprietary encoding or unique representations of data within the
file.</li>
<li>
<strong>Read Warnings Carefully:</strong> When using
<code><a href="../reference/get_file.html">get_file()</a></code>, carefully read any warnings or error messages
that appear. These messages can provide vital clues for troubleshooting
and resolving issues.</li>
<li>
<strong>Consult Documentation:</strong> For more detailed guidance
on handling specific .sav file issues, refer to both the
<code>scgUtils</code> and <code>haven</code> package documentation.
These resources can offer additional insights and solutions for complex
cases.</li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://sarahcgall.co.uk/" class="external-link">Sarah Gall</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

  </div></footer>
</body>
</html>
